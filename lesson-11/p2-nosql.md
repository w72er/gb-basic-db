# NoSQL

1 Причины зарождения
2 Современные приложения
3 Классификация NoSQL-баз данных
4 CAP-теорема

## Причины зарождения

Сначала сохранить, а затем посмотреть. Есть несколько подходов в
зависимости от стиля использования.

С ростом пользователей в интернет стали расти потоки данных, отсюда
стали расти и хранения и обработки данных.
Одного сервера стало не хватать, так появились кластеры,о данные стало
хранить на нескольких серверах.
Если раньше можно было обойтись одной бд, то теперь приложение стало
объединять несколько баз.

* распределенные бд
* шардирование
* 

БД ключ значение
Столбцовые БД (колоночные) каждый столбец хранится в отдельном файле.
Документоориентированные базы
Графовые базы
Объектные базы - можно работать без хранимых процедур и ОРМ
Полнотекстовый поиск

## Современные приложения
## Классификация NoSQL-баз данных
## CAP-теорема

согласованность - любая операция всегда возвращает самый последний
результат. Так при репликации не всегда выполняется.
доступность всегда получать и обновлять данные
устойчивость к распределению - можно распределить БД, и БД продолжит
работу после выхода узла.

У каждой бд есть своя специализации
CP - шардирование, часть данных может быть недоступно.

## redis

Реддис - хранит все в оперативке, однопоточный.

redis-cli
> HELP PING
> HELP @{tab tab} - помощь по группам с автодополнением.
> 
> SET key 'value'
> GET key
> MSET fst 1 snd 2 frd 3
> SET count 0
> INCR count // ++
> DEL key
> KEYS * // вернуть список всех ключей

Ключ требуют большинство команд.

Поддерживаются разные типи, в  том числе и множества, над которыми
есть операции union пересечение, исключение между множествами.

## MongoDB

Преимущество: вся информация вместе и готова без объединения таблиц.

Монга для яваскрипта, и команды на яваскрипте.

коллекция shop - говорит о том что может быть несколько "таблиц" -
коллекций.

## Elastic search

Большой объем информации, и поэтому пользователь ищет информацию.

БД полнотекстовые поиска как правило документоориентированы.

текст -> лексемы или токены -> 

Индексирование
лексема связывается обратным индексом, где по слову находятся документы.

Слова можно объединять с помощью И, ИЛИ, НЕ

расположение слов (порядок слов) имеет значение. То есть нужно
учитывать расстояние слов.

Релевантность - это вес в оценке.

term - точное соответствие
маппинг, должен быть с поддержкой русского языка.
query - полнотекствовый поиск.


## Колоночные субд

Коммерческие транзакции для денег, однако есть много других
некоммерческих задач, например аналитические запросы.

Аналит. запросы
какова выручка товара
какую марку покупают чаще всего

аналит. запросы могут выполняться часами.
Склад данных это копия данных.

В реляционной бд, бд вычитывает все столбцы с диска, а в 
столбцовых данные только одного столбца.

* сжатие столбцов это?
* данные на харде
* параллельая обработка на многоядерных процах
* sql
* репликация
* шардирование
* дока на русском

Подсчитаем кол-во посещений по неделям - реализация практически как
на mysql.