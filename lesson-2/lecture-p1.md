## Типы баз данных

Базы данных 
Данныи и программы
История баз данных
Как базы данных используются в современных программах.

Данные живут дольше программ

Компактность данных,
Много параллельных процессво обращаются к файлу, то солжно осуществить
конкурентный доступ. блокировки.
Чтобы кэшировать следует писать свои программы для кэша.
Конфликты при совместном редактировании.

Само хранилице и надстройка - БД

### история

#### Иерархические СУБД

Одна книга может относится в нескольких отношениях предок потоомок

#### Сетевая бд

NoSQl 
Недостатки:
* набор отношений заданы наперед

#### Реляционные БД

В ней отсутствует предок-потомок. самый распространенный вид бд.

db-engines.com

Не стали помещаться на сервере приложения и базы данныъ.
Распределенные системы не позволяли реализовать SQL.

100 000 rps
шардирование - класстер который ведет себя как единое решение.

документо ориентированные базы Собирать результирующий документ из
нескольких файлов накладно, поэтому можно хранить все в одном.

clickhouse - 

Распределенные базы данных могут терять связанность, такую проблему
решает cassndra

разные базы решают разные проблемы
* Redis - Кэш в оперативной памяти
* MySQL - Основная бд
* ElasticSearch - Полнотекстовый поиск
* ClickHouse - Колоночная бд для статистики (огромные массивы данных)

## Основы реляционных баз данных

Информация организована в виде таблиц.
catalogs
id name total
1 процессоры 14
2 Вдекарты 10

На пересечении одного стоблца и строки находится лишь одно значение.
В одной таблице имя столбца уникально. столбцы упорядочены, а строки
нет, это означает, что один запрос, может возвращать перемешанные
строки. В таблице может находиться любое кол-во строк, такая таблица
называется пустой. У строк нет номера, но мы можем придумать
первичный ключ.

Связь между таблицами

внешний ключ - идентификатор категории

Транзакции

В приложении может что-то пойти не так: отвалиться соединение,
- способ группировки нескольких операций как одна, все или ничего.

ACID
atomicy - атомарность - реакция базы данных на сбой. Откат на 
раннее состояние в случае сбоя. 
consistency - согласованность, не должно быть отрицательного возраста
или ссылки на неимеющиеся внешние ключи, дебет должен сходится в
кредетом. Сейчас бизнес правила находятся часто в приложении и
база стала лишь для хранения.
isolation - изолированность. Каждая транзакция выполняется так, как
будто она одна, но по факту они вызываются параллельно.
durability - сохраняемость, не нерять данные, при питаниях, сбоях. 

CAP - теорема

1000 клиентов - масштабирование, транзакция
- блокировка данных, а при высоких нагрузках, запросы пользователей
выстраиваются в очередях, мы не можем улучшать сервер бесконечно
и нужно бызы разностить на разные серверах

Доступность (Availability) Все клиенты могут читать и писать в бд,
им не нужно ждать пока один прочитает или запишет.
Согласованность (Consistency) Клиенты должны получить один и тот же
ответ, на один и тот же запрос, если даже данные изменяются.
Устойчивость к разделению (Partition tolerance) - базу данных можно
разделить между несколькими машинами.
mysql postgree ac
redis mongo cp
cassandra riac ap

## MySQL and клиенты

архитектура делится на две части
* ядро
* и движки - реализует механизм баз данных
    * innodb
    * myisam
    * memory
    * archive

Такая архитектура позволяет разрабатывать ядро одной, движок другой.

Консольные утилиты - самый быстрый и явный доступ.
```sql
mysql -u root -p
SELECT 'Hello world!;
; - после нее отправится команда на сервер.
1 заголовок стоблцов 
2+ ответ сервера
```

Команды mysql

use выбор БД
\S status - 
\! SYSTEM - bash
\G Вывод результата в вертикальномо режиме. Это специфика клиента
mysql, об этой команде mysql сервер ничего не знает, поэтому в другом
клиенте, команды `\G` не будет.

Создадим файл hello.sql
```sql
mysql
SOURCE hello.sql
\. hello.sql
```

Чтобы не вводить постоянно параметры для входа в mysql.
```text
(mysql)
user=
password=
```.mycnn

Перенос бд с одной бд в другую
```sql
(client) # для дампа
user=root
password
```

```text
mysqldump mysql | mysql.sql
mysql mysql < hello.sql # восстановить дамп.
```

## Управление базами данных

создать базу данных
`create database shop;`
`show databases;`
путь каталога данных:
`show variables like 'datadir';`
каждая директория - это бд. Там нет только информационной схемы,
потому что это виртуальная бд.
cat db.opt - просто указывает кодировку к базе данных

Копирование данных - sqldump
удалить базу данных drop database;
виндовс не чувствителен к регистру, а линукс нет.
create database if not exists shop;

use - не оператор SQL, поэтому не надо ставить ;

создание таблицы
CREATE TABLE имя_таблица
параметры_столбцов

ошибка вызовет остановку выполнения команд SQL в пакетном режиме
то есть вызове 
`describe table`
describe user 'm%'; 
show и describe - не sql команды.


Структура системной БД.

представление - таблица без делете, редактировать и вставить


Help
reference manual


Язык запроса SQL

